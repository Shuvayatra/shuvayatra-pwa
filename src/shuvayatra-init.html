<link rel="import" href="../bower_components/polymer/polymer.html">
<link rel="import" href="../bower_components/iron-localstorage/iron-localstorage.html">
<link rel="import" href="shuvayatra-app.html">
<link rel="import" href="shuvayatra-onboard.html">
<dom-module id="shuvayatra-init">
    <template>
        <style>
            :host {
                --app-primary-color: #27a8d8;
                --app-secondary-color: black;
                display: block;
            }
        </style>
        <iron-localstorage name="onboard" value="{{onboard}}" on-iron-localstorage-load-empty="_handleEmptyOnboard">
        </iron-localstorage>
        <template is="dom-if" if="{{ _showOnboard() }}">
            <shuvayatra-onboard></shuvayatra-onboard>
        </template>
        <template is="dom-if" if="{{ !_showOnboard() }}">
            <shuvayatra-app></shuvayatra-app>
        </template>
    </template>
    <script>
    	Polymer({
            is: 'shuvayatra-init',
            properties:{
            	onboard:{
            		type:Object,
            		value:{
			                dob:{},
			                status: false
			            }
            	}
            },
            _showOnboard : function() {
                if(window.location.pathname.indexOf('post')>=0){
                    return false;
                } else {
                    if(typeof(this.onboard)==='undefined'){
                    this.onboard={
                            dob:{},
                            status: false
                        };
                    }
                    return this.onboard.status;
                }
      
	            
	        },
            _handleEmptyOnboard:function(){
                this.onboard={
                            dob:{},
                            status: false
                        };
            },
	        getDomainUrl :  function(url){
	            var domain;
	            //find & remove protocol (http, ftp, etc.) and get domain
	            if (url.indexOf("://") > -1) {
	                domain = url.split('/')[2];
	            }
	            else {
	                domain = url.split('/')[0];
	            }

	            //find & remove port number
	            domain = domain.split(':')[0];

	            return domain;


	        }
        });
    </script>
</dom-module>